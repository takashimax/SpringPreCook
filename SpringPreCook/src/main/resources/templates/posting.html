<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>投稿ページ</title>
</head>

<body>
	<div th:insert="~{common/sourceList :: sourceList}"></div>
	<div th:replace="~{common/header :: header}"></div>
	<script type="text/javascript" th:src="@{/js/posting.js}"></script>
	<h2>投稿ページ</h2>
	<form th:action="@{/posting}" method="post" enctype="multipart/form-data" th:object="${postingForm}">
		<div class="mt-3">
			<label>件名</label>
			<div>
				<input type="text" th:field="*{postingTitle}">
			</div>
		</div>
		<input type="file" class="form-control" accept='image/*' onchange="previewImage(this)" th:field="*{imageUrl}">
		<img id="preview" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
			style="max-width:200px;">
		<div>
			<label>本文</label>
			<div>
				<textarea th:field="*{postingText}" rows="5" cols="50"></textarea>
			</div>
		</div>
		<div>
			<input type="submit" value="投稿">
		</div>
		<div>
			<div>
				<label>材料順</label>
				<input type="text" th:field="*{materialOrder}">
			</div>
			<div>
				<label>材料名</label>
				<input type="text" th:field="*{materialName}">
			</div>
			<div>
				<label>分量</label>
				<input type="text" th:field="*{materialQuantity}">
			</div>
		</div>
		<div>
			<label>調理手順</label>
			<div>
				<textarea th:field="*{detailOrder}" rows="5" cols="50"></textarea>
			</div>
			<div>
				<input type="file" class="form-control" accept='image/*' onchange="previewImage(this)"
					th:field="*{imageUrl}">
				<img id="preview" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
					style="max-width:200px;">
			</div>
			<div>
				<label>調理詳細</label>
				<div>
					<input type="text" th:field="*{postingDetailText}">
				</div>
			</div>
		</div>
		<script>
			function previewImage(obj) {
				var fileReader = new FileReader();
				fileReader.onload = (function () {
					document.getElementById('preview').src = fileReader.result;
				});
				fileReader.readAsDataURL(obj.files[0]);
			}
		</script>
	</form>
	<div class="d-flex">
		<div th:each="posting : ${postingList}">
			<div class="card text-bg-light mb-3" style="max-width: 12rem;">
				<!--				<a th:href="@{/precook/__${item.itemName}__}">-->
				<div class="card-header" th:text="${posting.postingTitle}"></div>
				<img th:src="@{/img/{imageUrl}  (imageUrl = *{posting.imageUrl})}" class="thumbnail img-fluid">
				</a>
			</div>
		</div>
	</div>
	<ul>
		<li><a href="#">編集</a></li>
		<li><a href="#">削除</a></li>
	</ul>
	<a th:href="@{/}">▶ホームへ戻る</a>
</body>

</html>