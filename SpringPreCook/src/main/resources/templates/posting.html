<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
</head>

<body>
	<div th:insert="~{common/sourceList :: sourceList}"></div>
	<div th:replace="~{common/header :: header}"></div>
	<h2>投稿ページ</h2>
	<form th:action="@{/posting}" method="post" enctype="multipart/form-data" th:object="${postingForm}">
		<ul>
			<li><a href="#">詳細</a></li>
			<li><a href="#">編集</a></li>
			<li><a href="#">削除</a></li>
		</ul>
		<input type="file" class="form-control" accept='image/*' onchange="previewImage(this)" th:field="*{imageUrl}">
		<img id="preview" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="
			style="max-width:200px;">
		<script>
			function previewImage(obj) {
				var fileReader = new FileReader();
				fileReader.onload = (function () {
					document.getElementById('preview').src = fileReader.result;
				});
				fileReader.readAsDataURL(obj.files[0]);
			}
		</script>
		<div>
			<label>タイトル</label>
			<div>
				<input type="text" th:field="*{postingTitle}">
			</div>
		</div>
		<div>
			<label>投稿内容</label>
			<div>
				<textarea th:field="*{postingText}" rows="10" cols="50"></textarea>
			</div>
		</div>
		<span>
			<img src="">
		</span>
		<div>
			<input type="submit" value="投稿">
		</div>
	</form>
	<table>
		<tr th:each="posting : ${postingList}" th:object="${posting}">
			<td th:text="*{postingTitle}"></td>
			<td th:text="*{postingText}"></td>
			<td th:text="*{imageUrl}"></td>
			<img th:src="@{/img/{imageUrl}  (imageUrl = *{imageUrl})}" class="thumbnail img-fluid">
			<td th:text="*{createTime}"></td>
			<td th:text="*{updateTime}"></td>
		</tr>
	</table>
	<a th:href="@{/}">▶ホームへ戻る</a>
</body>

</html>